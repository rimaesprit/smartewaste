{{ form_start(form, {'attr': {'novalidate': 'novalidate', 'class': 'needs-validation'}}) }}

{% if not form.vars.valid %}
<div class="alert alert-danger">
    <i class="fas fa-exclamation-triangle me-2"></i>
    Veuillez corriger les erreurs ci-dessous pour pouvoir soumettre le formulaire.
</div>
{% endif %}

<div class="row">
    <div class="col-md-6 mb-3">
        <div class="form-group">
            {{ form_label(form.localisation) }} <span class="text-danger">*</span>
            {{ form_widget(form.localisation) }}
            <div class="invalid-feedback d-block">
                {{ form_errors(form.localisation) }}
            </div>
        </div>
    </div>
    <div class="col-md-6 mb-3">
        <div class="form-group">
            {{ form_label(form.adresse) }} <span class="text-danger">*</span>
            {{ form_widget(form.adresse) }}
            <div class="invalid-feedback d-block">
                {{ form_errors(form.adresse) }}
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-4 mb-3">
        <div class="form-group">
            {{ form_label(form.niveauRemplissage) }} <span class="text-danger">*</span>
            {{ form_widget(form.niveauRemplissage) }}
            <div class="invalid-feedback d-block">
                {{ form_errors(form.niveauRemplissage) }}
            </div>
            <div class="mt-2">
                <div class="progress">
                    <div id="preview-progress-bar" class="progress-bar bg-success" role="progressbar" style="width: {{ form.niveauRemplissage.vars.value|default(0) }}%" aria-valuenow="{{ form.niveauRemplissage.vars.value|default(0) }}" aria-valuemin="0" aria-valuemax="100">{{ form.niveauRemplissage.vars.value|default(0) }}%</div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="form-group">
            {{ form_label(form.type) }} <span class="text-danger">*</span>
            {{ form_widget(form.type) }}
            <div class="invalid-feedback d-block">
                {{ form_errors(form.type) }}
            </div>
        </div>
    </div>
    <div class="col-md-4 mb-3">
        <div class="form-group">
            {{ form_label(form.statut) }} <span class="text-danger">*</span>
            {{ form_widget(form.statut) }}
            <div class="invalid-feedback d-block">
                {{ form_errors(form.statut) }}
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12 mb-4">
        <div class="form-group">
            <label>Emplacement sur la carte <span class="text-muted">(Optionnel)</span></label>
            <div id="map" style="height: 300px;"></div>
            <div class="mt-2">
                <button type="button" class="btn btn-primary btn-sm" id="geolocate-btn">
                    <i class="fas fa-map-marker-alt mr-2"></i> Utiliser ma position actuelle
                </button>
            </div>
            {{ form_widget(form.latitude) }}
            {{ form_widget(form.longitude) }}
            <div class="invalid-feedback d-block">
                {{ form_errors(form.latitude) }}
                {{ form_errors(form.longitude) }}
            </div>
        </div>
    </div>
</div>

<div class="row mt-4">
    <div class="col-md-12">
        <p class="text-muted"><span class="text-danger">*</span> Champs obligatoires</p>
        <button class="btn btn-success">
            <i class="fas fa-save mr-2"></i> {{ button_label|default('Enregistrer') }}
        </button>
    </div>
</div>
{{ form_end(form) }} 